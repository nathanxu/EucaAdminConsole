/**
 * This file was generated by Data Model Tool
 * See <a href="http://www.hna.net/dmt/schema">http://www.hna.net/dmt/schema</a>
 *
 * Copyright (c) 2012 hnair.com
 * All rights reserved.
 * Date: 2012-10-17
 */
package net.owlgroup.ea.init.action;


import javax.annotation.Resource;

import net.owlgroup.ea.init.bean.InitBean;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;

import com.alibaba.citrus.service.requestcontext.parser.ParserRequestContext;
import com.alibaba.citrus.turbine.Context;
import com.alibaba.citrus.turbine.dataresolver.Params;
import com.alibaba.citrus.turbine.util.Function;
import com.eucalyptus.admin.EucaAdminConsole;


@Function()
public class InitAction {

    protected Logger logger = LoggerFactory.getLogger(getClass());

    @Resource
    private ParserRequestContext parser;
    @Resource
    private EucaAdminConsole eucaAC;

    @Function("public")
    public void doQuery(Context context,
        @Params InitBean entity) {
        InitBean ib = new InitBean();
        String usemock = System.getProperty("api.usemock", "true");
        String clcIp = System.getProperty("api.clcIp", "127.0.0.1");
        String clcPort = System.getProperty("api.clcPort", "8080");
        String accessKey = System.getProperty("api.accessKey", "123123123");
        String secretKey = System.getProperty("api.secretKey", "123123123");
        eucaAC.configure(clcIp, Integer.valueOf(clcPort), accessKey, secretKey);
        context.put("json", ib);
    }

}